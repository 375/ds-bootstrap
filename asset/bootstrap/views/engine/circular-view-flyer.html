<div class="row">
	<div class="col-md-12" data-ng-include="getThemeUrl('/views/engine/circular-view-type.html')"></div>
</div>
<br/>
<div class="dcircular-list" data-ng-hide="vm.circIdx > 0 && vm.pageIdx > 0">
	<div class="dcircular-list-content">
		<div class="col-md-4 col-sm-6 dcircular-list-single" data-ng-repeat="item in vm.digitalCirc.Circulars">
     <a class="thumbnail dcircular-thumbnail" href="javascript:void(0)" data-ng-click="vm.circIdx = ($index + 1); vm.pageIdx = 1">
       <img class="dcircular-image" alt="" data-ng-src="{{item.SmallImageUrl}}"> 
       <div class="caption dcircular-caption"><h3 style="width: 100%; text-align: center;">{{item.CircularTypeName}}</h3></div>
     </a>
   </div>
 </div>
</div>
<div class="dcircular-content" data-ng-show="vm.circIdx > 0 && vm.pageIdx > 0">
<div data-ng-if="vm.digitalCirc.Circulars.length > 1"><a href="javascript:void(0)" data-ng-click="vm.circIdx = 0" class="dcircular-back-to-list">&larr; Choose Another Ad</a><br /></div>
  <ul class="pagination">
    <li>
      <a href="javascript:void(0)" aria-label="Previous" data-ng-click="vm.pageIdx = (vm.pageIdx <= 1) ? vm.pageIdx = vm.digitalCirc.Circulars[vm.circIdx - 1].Pages.length : vm.pageIdx - 1">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>
    <li data-ng-repeat="item in [] | range:0:vm.digitalCirc.Circulars[vm.circIdx - 1].Pages.length" data-ng-class="{'active': item == (vm.pageIdx - 1)}">
      <a href="javascript:void(0)" data-ng-click="vm.pageIdx = item + 1">{{$index + 1}}</a>
    </li>
    <li>
      <a href="javascript:void(0)" aria-label="Next" data-ng-click="vm.pageIdx = (vm.pageIdx >= vm.digitalCirc.Circulars[vm.circIdx - 1].Pages.length) ? 1 : vm.pageIdx + 1">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  </ul>
  <div class="map">
    <div style="display: none" data-gsn-svg-image=".circImage" data-src="{{vm.digitalCirc.Circulars[vm.circIdx - 1].Pages[vm.pageIdx - 1].ImageUrl}}"></div>
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" preserveAspectRatio="xMinYMin slice">
      <image width="1" height="1" xlink:href="" class="circImage" style="display: none"></image>
      <g data-ng-repeat="item in vm.digitalCirc.Circulars[vm.circIdx - 1].Pages[vm.pageIdx - 1].Items | orderBy:['-ItemId']" ng-cloak="" style="position: relative">
        <foreignObject class="circItemContainer" ng:attr:x="{{item.rect[0]}}" ng:attr:y="{{item.rect[1]}}" ng:attr:width="{{item.rect[4]}}" ng:attr:height="{{item.rect[5]}}" style="display: table;"  data-ng-class="{'active': item.ItemId == vm.activeItem.ItemId }"  data-ng-click="vm.activeItem = (vm.activeItem.ItemId == item.ItemId) ? null : item">
            <div xmlns="http://www.w3.org/1999/xhtml" class="myContent" href="javascript:void(0)">
              <div>
                <a class="btn btn-default btn-xs" data-ng-click="doToggleCartItem($event, item)" data-ng-class="{'myAdd': !isOnList(item)}">
                  <i class="fa" data-ng-class="{'fa-square-o': !isOnList(item), 'fa-check-square-o': isOnList(item)}"></i> {{ !isOnList(item) ? 'ADD ITEM' : 'ON LIST'}}
                </a>
                <a class="btn btn-default btn-xs myInfo" style="position: absolute; right: 0; top: 0;" title="View Item details..." data-gsn-modal="getThemeUrl('/views/engine/modal-circular-item.html')" data-ng-click="vm['item' + $index] = 0; showModal()" data-show-if="vm['item' + $index]">
                  <i class="fa fa-info-circle"></i>
                </a>
              </div>
            </div>
        </foreignObject>
      </g>
    </svg>
  </div>
    <ul class="pagination">
    <li>
      <a href="javascript:void(0)" aria-label="Previous" data-ng-click="vm.pageIdx = (vm.pageIdx <= 1) ? vm.pageIdx = vm.digitalCirc.Circulars[vm.circIdx - 1].Pages.length : vm.pageIdx - 1">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>
    <li data-ng-repeat="item in [] | range:0:vm.digitalCirc.Circulars[vm.circIdx - 1].Pages.length" data-ng-class="{'active': item == (vm.pageIdx - 1)}">
      <a href="javascript:void(0)" data-ng-click="vm.pageIdx = item + 1">{{$index + 1}}</a>
    </li>
    <li>
      <a href="javascript:void(0)" aria-label="Next" data-ng-click="vm.pageIdx = (vm.pageIdx >= vm.digitalCirc.Circulars[vm.circIdx - 1].Pages.length) ? 1 : vm.pageIdx + 1">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  </ul>
</div>
<div class="dcircular-popup">
  <div class="popup-title"></div>
  <div class="popup-content"></div>
</div>
<style>
.map {
  display: block;
  margin: 0 auto;
}

.myContent {
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  margin: auto;
  display: table;
  height: 100%;
  text-align: center;
}

.myContent > div {
  display: table-cell;
  vertical-align: middle
}

.myAdd, .myInfo {
  display: none;
}

.circItemContainer:hover .myAdd, .circItemContainer:hover .myInfo {
  display: block;
}

</style>